# イキトメ!

Providing by 品川アジャイル


---

## 概要

- 目の前に動くコードがあります。正常に動作はするものの、このまま機能を追加するのはちょっと厳しそうです。
- 今回は、実際の現場でよくある、そんな状況を想定し、TDD の一般的な進め方ではなく、 BDD のアプローチでモブプログラミングを進めてゆきます。

---

## FizzBuzz とは

- 1 から順番に数字を表示するだけ
- ただし、次の条件で置換する
  - 3 の倍数なら Fizz
  - 5 の倍数なら Buzz
  - 両方の倍数なら FizzBuzz

(詳しくは Wikipedia の [Fizz Buzz](https://ja.wikipedia.org/wiki/Fizz_Buzz) で)

---

## シナリオ

- 前任者が FizzBuzz を実装しました。テストコードがあり、1 から 15 までは正しく動作することが分かってます。
- 上司からの指示は、これを 100 まで動作する FizzBuzz に拡張することです。
- コードを見ると、そのまま拡張するのはちょっと難しそうです。リファクタリングの出番です。
- テストを失敗することなく、 **グリーンを維持したまま、コードを洗練** してゆきましょう。

---

## モブプログラミング

- 3 人以上で一緒にプログラミングするスタイルです。
- ドライバーを一人選び、他の人は全員ナビゲーターです。
- ドライバーはナビゲーターからの指示でコードを書きます。
- ドライバーは数分ごとに交代します。
- オフラインでは一台のパソコンを共用します。今回はオンラインなので、 Live Share を使います。

---

## 息止めリファクタリングのルール

- このセッションでは、テストレッド (テストが失敗してる) の間は、見ている人も **全員息を止める** ルールで進めてゆきます。ご協力をお願いします。
- モブのドライバーは、素早くテストグリーン (テストが通る状態) にしてください。死人が出てしまわないようにご注意を! w


---

## 言語と BDD スタイル

- node.js (JavaScript) です。アロー関数 (無名関数) を使ってます。
  - function hoge (arg) { }
  - const hoge = (arg) => {}
- BDD スタイルのテストコードを使います
  - describe グルーピング
  - it テスト関数
  - expect アサーション

---

## ふりかえり

- 最初のコードと見比べましょう。
- モブプログラミングの効果は?
- リファクタリングとは何か?
- プロダクトコードはベストか?
- テストコードはベストか?

